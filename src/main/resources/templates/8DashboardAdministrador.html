<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sport Connect - Dashboard Administrador</title>
  <link rel="stylesheet" href="/CSS/8DashboardAdministrador.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    .section-buttons {
  display: flex;
  gap: 10px;
  margin: 20px 0;
}

.section-btn {
  padding: 12px 18px;
  font-size: 16px;
  background: #1f2937;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  transition: background 0.2s ease;
}

.section-btn:hover {
  background: #374151;
}

  </style>
</head>

<body>

  <!-- ========== SIDEBAR ========== -->
  <aside class="sidebar">
    <div class="sidebar-logo">
      <img src="/IMG/Logo.svg" alt="Logo Sport Connect">
      <h2>SPORT CONNECT</h2>
    </div>

    <nav class="sidebar-menu">
      <a href="/"><i data-lucide="home"></i>Inicio</a>
      <a href="/usuarios"><i data-lucide="users"></i> Usuarios</a>
      <a href="/jugadores"><i data-lucide="user"></i> Jugadores</a>
      <a href="/listado-ligas"><i data-lucide="shield"></i> Ligas</a>
      <a href="/partidos"><i data-lucide="calendar"></i> Partidos</a>
      <a href="/configuracion"><i data-lucide="settings"></i> Configuración</a>
    </nav>

    <div class="logout">
      <a href="/"><i data-lucide="log-out"></i> Cerrar sesión</a>
    </div>
  </aside>


  <!-- ========== MAIN CONTENT ========== -->
  <main class="main-content">

    <!-- HEADER -->
    <header class="dashboard-header">
      <div class="profile-banner">
        <img src="/IMG/avatarAdmin.png" alt="Avatar Admin" class="avatar-large" />
        <div class="profile-info">
          <h1>Administrador General</h1>
          <p>Panel de Gestión de Sport Connect</p>
          <span class="tag">Modo Administrador</span>
        </div>
      </div>
    </header>


    <!-- CARDS RESUMEN -->
    <section class="summary-section">
      <div class="summary-card">
        <i data-lucide="users"></i>
        <h3>Usuarios Totales</h3>
        <p th:text="${usuarios.size()}"></p>
      </div>


      <div class="summary-card">
        <i data-lucide="shield"></i>
        <h3>Ligas</h3>
        <p th:text="${ligas.size()}"></p>
      </div>

      <div class="summary-card">
        <i data-lucide="calendar"></i>
        <h3>Equipos</h3>
        <p th:text="${equipos.size()}"></p>
      </div>
    </section>

<!-- BOTONES PARA CAMBIAR SECCIÓN -->
<div class="section-buttons">
  <button class="section-btn" onclick="showSection('usuarios')">Usuarios</button>
  <button class="section-btn" onclick="showSection('jugadores')">Jugadores</button>
  <button class="section-btn" onclick="showSection('ligas')">Ligas</button>
  <button class="section-btn" onclick="showSection('partidos')">Equipos</button>
</div>




    <!-- ========== TABLA DE USUARIOS ========== -->
    <div id="usuarios" class="content-section">
<section id="usuarios" class="table-section">
      <div class="card">
        <h2><i data-lucide="users"></i> Gestión de Usuarios</h2>

        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Rol</th>
              <th>Email</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>

          <tbody>
            <tr th:each="u : ${usuarios}">
              <td th:text="${u.id}"></td>
              <td th:text="${u.nombre + ' ' + u.apellido}"></td>
              <td th:text="${u.rol}"></td>
              <td th:text="${u.email}"></td>

              <td>
                <span class="status"
                  th:classappend="${u.rol == 'suspendido'} ? ' inactive' : ' active'"
                  th:text="${u.rol == 'suspendido'} ? 'Suspendido' : 'Activo'">
                </span>
              </td>

              <td>
                <button class="btn-small edit" 
                        th:onclick="'window.location.href=\'/admin/usuario/editar/' + ${u.id} + '\';'">
                    Editar
                </button>

                <!-- Botón Eliminar -->
                <form th:action="@{/admin/usuario/eliminar/{id}(id=${u.id})}" method="post" style="display:inline;">
                    <button type="submit" class="btn-small delete" 
                            onclick="return confirm('¿Estás seguro que quieres eliminar este usuario?');">
                        Eliminar
                    </button>
                </form>
    </form>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
</section>
    </div>



    <!-- ========== TABLA DE JUGADORES ========== -->
    <div id="jugadores" class="content-section" style="display:none;">
    <section id="jugadores" class="table-section">
          <div class="card">
            <h2><i data-lucide="user"></i> Jugadores Registrados</h2>

            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nombre</th>
                  <th>Correo</th>
                  <th>Posición</th>
                
                </tr>
              </thead>

              <tbody>
                <tr th:each="u : ${usuarios}">
                  <td th:text="${u.id}"></td>
                  <td th:text="${u.nombre}"></td>
                  <td th:text="${u.email}"></td>
                  <td th:text="${u.posicion}"></td>
                  
                </tr>
                
              </tbody>
            </table>
          </div>
    </section>
    </div>



    <!-- ========== TABLA DE LIGAS ========== -->
    <div id="ligas" class="content-section" style="display:none;">
    <section class="table-section">
        <div class="card">
            <h2><i data-lucide="shield"></i> Ligas Registradas</h2>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Ubicación</th>
                        <th>Temporada</th>
                        <th>Equipos</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="l : ${ligas}">
                        <td th:text="${l.id}"></td>
                        <td th:text="${l.nombre}"></td>
                        <td th:text="${l.ubicacion}"></td>
                        <td th:text="${l.temporada}"></td>
                        <td th:text="${l.equipos}"></td>
                        <td>
                            <a th:href="@{/editarLiga/{id}(id=${l.id})}" class="btn-small edit">Editar</a>
                            <form th:action="@{/eliminarLiga/{id}(id=${l.id})}" method="post" style="display:inline;">
                                <button type="submit" class="btn-small delete">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>

<!-- EQUIPOS -->
<div id="partidos" class="content-section" style="display:none;">
    <section class="table-section">
        <div class="card">
            <h2><i data-lucide="calendar"></i> Equipos</h2>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Deporte</th>
                        <th>Ciudad</th>
                        <th>Entrenador</th>
                        <th>Jugadores</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="e : ${equipos}">
                        <td th:text="${e.id}"></td>
                        <td th:text="${e.nombre}"></td>
                        <td th:text="${e.deporte}"></td>
                        <td th:text="${e.ciudad}"></td>
                        <td th:text="${e.nombreEntrenador}"></td>
                        <td th:text="${e.cantJugadores}"></td>
                        <td>
                            <a th:href="@{/editarEquipo/{id}(id=${e.id})}" class="btn-small edit">Editar</a>
                            <form th:action="@{/eliminarEquipo/{id}(id=${e.id})}" method="post" style="display:inline;">
                                <button type="submit" class="btn-small delete">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>s


    <!-- ACTIVIDAD DEL SISTEMA -->
    <section class="reports-section">
      <div class="card">
        <h2><i data-lucide="bar-chart-3"></i> Actividad del Sistema</h2>
        <ul class="activity-list" id="actividad-lista">
          <li th:each="act : ${actividades}">
            <span th:text="${act.fecha} + ' - ' + ${act.descripcion}"></span>
          </li>
        </ul>

        <!-- Contenedor para las flechas -->
        <div class="pagination-controls">
          <button id="prev-btn">&larr; Anterior</button>
          <span id="page-info"></span>
          <button id="next-btn">Siguiente &rarr;</button>
        </div>
      </div>
    </section>

  </main>

 
  <script>
  function showSection(sectionId) {
    // Ocultar todas las secciones
    document.querySelectorAll('.content-section').forEach(sec => {
      sec.style.display = 'none';
    });

    // Mostrar la sección seleccionada
    document.getElementById(sectionId).style.display = 'block';
  }
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const items = document.querySelectorAll("#actividad-lista li");
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");
    const pageInfo = document.getElementById("page-info");

    const itemsPerPage = 3;
    let currentPage = 1;
    const totalPages = Math.ceil(items.length / itemsPerPage);

    function showPage(page) {
      const start = (page - 1) * itemsPerPage;
      const end = start + itemsPerPage;

      items.forEach((item, index) => {
        item.style.display = index >= start && index < end ? "block" : "none";
      });

      pageInfo.textContent = `Página ${page} de ${totalPages}`;

      // Desactivar botones si no hay más páginas
      prevBtn.disabled = page === 1;
      nextBtn.disabled = page === totalPages;
    }

    prevBtn.addEventListener("click", () => {
      if (currentPage > 1) {
        currentPage--;
        showPage(currentPage);
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentPage < totalPages) {
        currentPage++;
        showPage(currentPage);
      }
    });

    // Mostrar la primera página al cargar
    showPage(currentPage);
  });
</script>


</body>

</html>
